### Infrastructure Setup

Here is a simple **bash script** `infra_provision_vms.sh` to create latest ubuntu VMs on a Mac for **k3s** kubernetes cluster.
---

#!/bin/bash

multipass delete --purge k3s-master k3s-worker1 k3s-worker2 2>/dev/null

multipass launch --name k3s-master --cpus 2 --memory 2G --disk 5G
multipass launch --name k3s-worker1 --cpus 2 --memory 4G --disk 30G
multipass launch --name k3s-worker2 --cpus 2 --memory 4G --disk 30G

multipass exec k3s-master -- sudo apt update
multipass exec k3s-master -- sudo apt upgrade
multipass exec k3s-master -- sudo apt install -y curl wget

multipass exec k3s-master -- bash -c "curl -sfL https://get.k3s.io | INSTALL_K3S_VERSION='v1.33.1+k3s1' INSTALL_K3S_EXEC='--disable=traefik' sh -s - --node-taint CriticalAddonsOnly=true:NoExecute"

multipass exec k3s-worker1 -- sudo apt update
multipass exec k3s-worker1 -- sudo apt install -y curl wget

multipass exec k3s-worker2 -- sudo apt update
multipass exec k3s-worker2 -- sudo apt install -y curl wget

multipass ls

multipass info k3s-master
multipass info k3s-worker1
multipass info k3s-worker2
---

### Note: To destroy the infrastructure

Run the following command:

```bash
./infra_destroy_vms.sh
```
